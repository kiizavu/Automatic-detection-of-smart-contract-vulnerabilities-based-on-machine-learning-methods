import os
import random
import csv
import shutil

path = 'pentest_smartcontract/contracts_SBWild'
contract_dir = 'pentest_smartcontract'

contracts = os.listdir(path)
random_contracts = random.sample(contracts, 1000)

header = ['address', 'arithmetic', 'reentrancy', 'time_manipulation', 'TOD', 'tx_origin']

for i in range(2):
    with open(f'pentest_smartcontract/checklist_{i}.csv', 'w', newline='') as f:
        writer = csv.writer(f)
        writer.writerow(header)
        for j in range(int(len(random_contracts) / 2)):
            contract = random_contracts[j + i * 500]
            src = os.path.join(path, contract)
            dst = os.path.join(contract_dir, str(i), contract)
            #print(src, dst)
            shutil.copy(src, dst)

            line = [contract]
            line.append(0)
            line.append(0)
            line.append(0)
            line.append(0)
            line.append(0)
            writer.writerow(line)
